# Phase 1 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê²€ì¦ ë¦¬í¬íŠ¸

**í”„ë¡œì íŠ¸**: í•´ì–‘ìˆ˜ì‚°ë¶€ ì‚°í•˜ê¸°ê´€ í¬ë¡¤ë§ ë°ì´í„° ëŒ€ì‹œë³´ë“œ
**ê²€í†  ë‚ ì§œ**: 2025-11-18
**ê²€í† ì**: Claude Code (ê³„íš ê²€í†  ë° ë¦¬ìŠ¤í¬ ë¶„ì„ ì „ë¬¸ê°€)
**ê²€í†  ëŒ€ìƒ**: Phase 1 ì„¤ê³„ ë¬¸ì„œ 4ê±´
**ê²€í†  ê²°ê³¼**: âš ï¸ **ì¡°ê±´ë¶€ ìŠ¹ì¸** (ì£¼ìš” ë³´ì•ˆ ë° ì•„í‚¤í…ì²˜ ìœ„í—˜ ìš”ì†Œ ë°œê²¬)

---

## ğŸ“‹ ê³„íš ê°œìš”

### ê²€í†  ëŒ€ìƒ ë¬¸ì„œ
1. `README (2).md` - í¬ë¡¤ëŸ¬ ê¸°ëŠ¥ ëª…ì„¸
2. `í•´ì–‘ìˆ˜ì‚°ë¶€_ëŒ€ì‹œë³´ë“œ_UIUX_ì„¤ê³„.md` - UI/UX ì„¤ê³„ì„œ
3. `ì»´í¬ë„ŒíŠ¸_ëª…ì„¸ì„œ.md` - React ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ì„¤ê³„
4. `ì‚¬ìš©ì_í”Œë¡œìš°_ë‹¤ì´ì–´ê·¸ë¨.md` - ì‚¬ìš©ì ê²½í—˜ í”Œë¡œìš°

### ê³„íšì˜ í•µì‹¬ ëª©í‘œ
í•´ì–‘ìˆ˜ì‚°ë¶€ ì‚°í•˜ 16ê°œ ê¸°ê´€(11ê°œ ì§€ë°©ì²­, 1ê°œ ê³µë‹¨, 4ê°œ í•­ë§Œê³µì‚¬)ì˜ ê³µì§€ì‚¬í•­/ì…ì°°ê³µê³ ë¥¼ ìë™ ìˆ˜ì§‘í•˜ì—¬ í†µí•© ëŒ€ì‹œë³´ë“œë¡œ ì œê³µ

### ì£¼ìš” ë‹¨ê³„
1. Python í¬ë¡¤ëŸ¬ ê°œë°œ (ì™„ë£Œ)
2. í¬ë¡¤ë§ ë°ì´í„°ë¥¼ Google Sheetsì— ì €ì¥
3. Google Sheetsë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ í™œìš©
4. Next.js ëŒ€ì‹œë³´ë“œ ê°œë°œ (Vercel ë°°í¬)
5. GitHub Actionsë¡œ ì •ê¸° í¬ë¡¤ë§ ìë™í™”

---

## âœ… ê°•ì 

### 1. ì² ì €í•œ ì‚¬ìš©ì ì¤‘ì‹¬ ì„¤ê³„
- **3ê°œì˜ ëª…í™•í•œ í˜ë¥´ì†Œë‚˜ ì •ì˜**: ì •ì±…ë‹´ë‹¹ì, ì…ì°°ë‹´ë‹¹ì, ì–¸ë¡ ì¸
- **êµ¬ì²´ì ì¸ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ì¼ì¼ ëª¨ë‹ˆí„°ë§, ì •ë°€ ê²€ìƒ‰, ëª¨ë°”ì¼ ë¹ ë¥¸ í™•ì¸
- **ì ‘ê·¼ì„± ìš°ì„ **: WCAG 2.1 AA ì¤€ìˆ˜ ê³„íš, í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜, ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›
- **ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë°”ì¼/íƒœë¸”ë¦¿/ë°ìŠ¤í¬í†± ëª¨ë‘ ê³ ë ¤

### 2. ìƒì„¸í•œ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„
- **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜**: Button, Input, Select ë“± ê³µí†µ ì»´í¬ë„ŒíŠ¸
- **TypeScript ê¸°ë°˜ íƒ€ì… ì•ˆì „ì„±**: Props ì¸í„°í˜ì´ìŠ¤ ëª…í™•íˆ ì •ì˜
- **ë¡œë”©/ì—ëŸ¬/ë¹ˆ ìƒíƒœ ì²˜ë¦¬**: ëª¨ë“  ìƒíƒœ ê³ ë ¤
- **í…ŒìŠ¤íŠ¸ ì „ëµ í¬í•¨**: ë‹¨ìœ„/í†µí•©/E2E í…ŒìŠ¤íŠ¸ ê³„íš

### 3. ì²´ê³„ì ì¸ ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°
- **ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬**: ìë™ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
- **ì„œë²„ ì—ëŸ¬**: ì—ëŸ¬ ë¡œê¹… (Sentry) í†µí•© ê³„íš
- **ì˜¤í”„ë¼ì¸ ëª¨ë“œ**: Service Worker ê¸°ë°˜ ìºì‹±
- **ë‚™ê´€ì  ì—…ë°ì´íŠ¸**: ë¶ë§ˆí¬ ë“± ì¦‰ê°ì ì¸ í”¼ë“œë°±

### 4. í¬ë¡¤ëŸ¬ ì•ˆì •ì„±
- **ìë™ í˜ì´ì§•**: 7ì¼ ë‚´ ê²Œì‹œë¬¼ì´ ìˆìœ¼ë©´ ë‹¤ìŒ í˜ì´ì§€ ìë™ ìˆ˜ì§‘
- **ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹ íŒŒì‹±**: 2025-01-17, 2025.01.17, 2025/01/17 ëª¨ë‘ ì§€ì›
- **ì„œë²„ ë¶€í•˜ ë°©ì§€**: í˜ì´ì§€/ê¸°ê´€ ì‚¬ì´ 1-2ì´ˆ ëŒ€ê¸°
- **ì˜ˆì™¸ ì²˜ë¦¬**: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ë‹¤ìŒ ê¸°ê´€ìœ¼ë¡œ ì§„í–‰

---

## âš ï¸ ì£¼ìš” ìš°ë ¤ì‚¬í•­ (ì‹¬ê°ë„ ìˆœ)

### ğŸ”´ ì‹¬ê° (Critical) - ì¦‰ì‹œ í•´ê²° í•„ìš”

#### 1. Google Service Account í‚¤ ë³´ì•ˆ ì·¨ì•½ì 
**ë¬¸ì œ**:
- í˜„ì¬ ê³„íšì— Google Service Account JSON í‚¤ ê´€ë¦¬ ë°©ì‹ì´ ëª…ì‹œë˜ì§€ ì•ŠìŒ
- GitHub Actionsì—ì„œ `gen-lang-client-0556505482-e847371ea87e.json` ì‚¬ìš© ì¶”ì •
- ì‹¤ì œ í‚¤ íŒŒì¼ì´ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ì— ì¡´ì¬ (í˜„ì¬ ì½ì€ íŒŒì¼ ëª©ë¡ì—ì„œ í™•ì¸)

**ìœ„í—˜**:
- í‚¤ íŒŒì¼ì´ Gitì— ì»¤ë°‹ë  ê²½ìš° **ê³µê°œ ì €ì¥ì†Œì—ì„œ ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥**
- ë¬´ë‹¨ Google Sheets API ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ **ì¿¼í„° ì†Œì§„**
- **ë°ì´í„° ë¬´ë‹¨ ìˆ˜ì •/ì‚­ì œ** ê°€ëŠ¥
- Google Cloud í”„ë¡œì íŠ¸ ì „ì²´ ë³´ì•ˆ ì¹¨í•´

**ê¶Œì¥ ì¡°ì¹˜**:
```bash
# ì¦‰ì‹œ ì‹¤í–‰
echo "*.json" >> .gitignore
echo "gen-lang-client-*.json" >> .gitignore
git rm --cached gen-lang-client-0556505482-e847371ea87e.json
git commit -m "Remove sensitive service account key"

# GitHub Secrets ë“±ë¡
# Repository Settings > Secrets > Actions > New repository secret
# Name: GOOGLE_SERVICE_ACCOUNT_KEY
# Value: (JSON íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ base64 ì¸ì½”ë”©)
```

**GitHub Actions ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²•**:
```yaml
# .github/workflows/crawl.yml
name: Daily Crawl
on:
  schedule:
    - cron: '0 9 * * *'  # ë§¤ì¼ ì˜¤ì „ 9ì‹œ (UTC)
  workflow_dispatch:

jobs:
  crawl:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: |
          pip install -r requirements.txt

      - name: Decode Service Account Key
        run: |
          echo "${{ secrets.GOOGLE_SERVICE_ACCOUNT_KEY }}" | base64 -d > service_account.json

      - name: Run Crawler
        run: |
          python marine_ministry_crawler.py
        env:
          GOOGLE_APPLICATION_CREDENTIALS: service_account.json

      - name: Cleanup
        if: always()
        run: |
          rm -f service_account.json
```

#### 2. Google Sheets API ë¬´ë£Œ ì¿¼í„° ì´ˆê³¼ ìœ„í—˜
**ë¬¸ì œ**:
- Google Sheets API ë¬´ë£Œ ì¿¼í„°: **ë¶„ë‹¹ 60íšŒ, ì¼ì¼ 500íšŒ**
- í˜„ì¬ ê³„íš:
  - 16ê°œ ê¸°ê´€ Ã— 2ê°œ ê²Œì‹œíŒ(ê³µì§€ì‚¬í•­/ì…ì°°) = 32ê°œ ê²Œì‹œíŒ
  - í‰ê·  3í˜ì´ì§€ í¬ë¡¤ë§ ê°€ì • = 96íšŒ í¬ë¡¤ë§
  - ê° í¬ë¡¤ë§ë§ˆë‹¤ Sheetsì— 1íšŒ ì“°ê¸° = **96íšŒ API í˜¸ì¶œ**
  - ëŒ€ì‹œë³´ë“œ ë™ì‹œ ì‚¬ìš©ì 10ëª… Ã— ë¶„ë‹¹ 5íšŒ ì½ê¸° = **ë¶„ë‹¹ 50íšŒ**

**ìœ„í—˜**:
- í¬ë¡¤ë§ ì¤‘ ì¿¼í„° ì´ˆê³¼ë¡œ **ë°ì´í„° ì†ì‹¤**
- ëŒ€ì‹œë³´ë“œ ì‚¬ìš©ìì—ê²Œ **"429 Too Many Requests" ì—ëŸ¬**
- í”¼í¬ ì‹œê°„ëŒ€ ì„œë¹„ìŠ¤ ë¶ˆê°€

**ê¶Œì¥ ì¡°ì¹˜**:

**Option 1: Batch ì“°ê¸°ë¡œ API í˜¸ì¶œ ìµœì†Œí™”** (ì¶”ì²œ)
```python
# ì˜ëª»ëœ ë°©ë²• (96íšŒ API í˜¸ì¶œ)
for post in posts:
    sheet.append_row([post.title, post.date, post.link])

# ì˜¬ë°”ë¥¸ ë°©ë²• (1íšŒ API í˜¸ì¶œ)
all_posts = []
for post in posts:
    all_posts.append([post.title, post.date, post.link])

# í•œ ë²ˆì— ëª¨ë“  í–‰ ì¶”ê°€
sheet.append_rows(all_posts, value_input_option='RAW')
```

**Option 2: ìºì‹± ë ˆì´ì–´ ì¶”ê°€**
```yaml
# Vercel í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ENABLE_CACHE=true
CACHE_TTL=300  # 5ë¶„

# Next.js API ë¼ìš°íŠ¸ì—ì„œ ìºì‹±
// pages/api/posts.js
import { unstable_cache } from 'next/cache';

export const revalidate = 300; // 5ë¶„ ìºì‹±

async function getPostsFromSheets() {
  // Google Sheets API í˜¸ì¶œ
}

export default async function handler(req, res) {
  const cachedPosts = await unstable_cache(
    getPostsFromSheets,
    ['posts'],
    { revalidate: 300 }
  )();

  res.json(cachedPosts);
}
```

**Option 3: Rate Limiting êµ¬í˜„**
```javascript
// lib/rateLimiter.js
import { RateLimiter } from 'limiter';

const limiter = new RateLimiter({
  tokensPerInterval: 50,  // ë¶„ë‹¹ 50íšŒ
  interval: 'minute'
});

export async function callSheetsAPI(fn) {
  await limiter.removeTokens(1);
  return fn();
}
```

#### 3. ë°ì´í„°ë² ì´ìŠ¤ ë¶€ì¬ì— ë”°ë¥¸ í™•ì¥ì„± ë¬¸ì œ
**ë¬¸ì œ**:
- Google Sheetsë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ **í”„ë¡œí† íƒ€ì…ì—ë§Œ ì í•©**
- í˜„ì¬ ê³„íšìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” ë°ì´í„°:
  - ì¼ì¼ í‰ê·  300ê±´ ê²Œì‹œë¬¼ Ã— 365ì¼ = **ì—°ê°„ 109,500ê±´**
  - Google Sheets ìµœëŒ€ í–‰: **500ë§Œ í–‰** (ì´ë¡ ìƒ ê°€ëŠ¥)
  - ì‹¤ì œ ì„±ëŠ¥: **1ë§Œ í–‰ ì´ˆê³¼ ì‹œ ì†ë„ ê¸‰ê²©íˆ ì €í•˜**

**ìœ„í—˜**:
- 6ê°œì›” í›„ ì•½ 54,000ê±´ ëˆ„ì  ì‹œ **ëŒ€ì‹œë³´ë“œ ë¡œë”© ì†ë„ 10ì´ˆ ì´ìƒ**
- í•„í„°/ê²€ìƒ‰ ê¸°ëŠ¥ **ì‘ë‹µ ì‹œê°„ 3-5ì´ˆ**
- ë³µì¡í•œ ì¿¼ë¦¬ ë¶ˆê°€ (ë‚ ì§œ ë²”ìœ„, ë‹¤ì¤‘ í•„í„° ì¡°í•©)
- íŠ¸ëœì­ì…˜ ë¯¸ì§€ì›ìœ¼ë¡œ **ë°ì´í„° ì •í•©ì„± ë¬¸ì œ**

**ê¶Œì¥ ì¡°ì¹˜**:

**Phase 2 ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš ìˆ˜ë¦½** (3ê°œì›” ì´ë‚´)

**Option 1: Supabase (PostgreSQL)** - ì¶”ì²œ
```javascript
// ì¥ì :
// - ë¬´ë£Œ í”Œëœ: 500MB ìŠ¤í† ë¦¬ì§€, 2GB ì „ì†¡ëŸ‰/ì›”
// - PostgreSQL ê¸°ë°˜ (ê°•ë ¥í•œ ì¿¼ë¦¬, ì¸ë±ì‹±, FTS)
// - Row Level Security (RLS)
// - Realtime ê¸°ëŠ¥ (WebSocket)
// - Vercelê³¼ ì™„ë²½ í†µí•©

// ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜ˆì‹œ
import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
);

// ë³µì¡í•œ ì¿¼ë¦¬ ê°€ëŠ¥
const { data, error } = await supabase
  .from('posts')
  .select('*')
  .eq('board', 'ì…ì°°ê³µê³ ')
  .gte('created_at', '2025-11-01')
  .lte('created_at', '2025-11-30')
  .ilike('title', '%ë¶€ì‚°%')
  .order('created_at', { ascending: false })
  .range(0, 19);  // í˜ì´ì§•
```

**Option 2: PlanetScale (MySQL)**
```javascript
// ì¥ì :
// - ë¬´ë£Œ í”Œëœ: 5GB ìŠ¤í† ë¦¬ì§€, 1ì–µ í–‰ ì½ê¸°/ì›”
// - Branching ê¸°ëŠ¥ (Git ê°™ì€ ìŠ¤í‚¤ë§ˆ ê´€ë¦¬)
// - ì—£ì§€ ë°°í¬ ìµœì í™”
// - Vercel í†µí•©

// ë‹¨ì :
// - FTS ì—†ìŒ (ê²€ìƒ‰ì— ì œì•½)
```

**Option 3: Vercel Postgres (Neon)**
```javascript
// ì¥ì :
// - Vercel ë„¤ì´í‹°ë¸Œ í†µí•©
// - Serverless, ìë™ í™•ì¥
// - ë¬´ë£Œ í”Œëœ: 3GB ìŠ¤í† ë¦¬ì§€

// ë‹¨ì :
// - ìƒëŒ€ì ìœ¼ë¡œ ë¹„ì‹¼ ê°€ê²© (ìœ ë£Œ ì „í™˜ ì‹œ)
```

**ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸**:
```python
# migrate_sheets_to_db.py
import gspread
from supabase import create_client
import os

# Google Sheets ì½ê¸°
gc = gspread.service_account(filename='service_account.json')
sheet = gc.open('í•´ì–‘ìˆ˜ì‚°ë¶€_ê²Œì‹œë¬¼').sheet1
rows = sheet.get_all_records()

# Supabase ì“°ê¸°
supabase = create_client(
    os.environ['SUPABASE_URL'],
    os.environ['SUPABASE_KEY']
)

for row in rows:
    supabase.table('posts').insert({
        'org_category': row['ê¸°ê´€êµ¬ë¶„'],
        'org_name': row['ê¸°ê´€ëª…'],
        'board': row['ê²Œì‹œíŒ'],
        'title': row['ì œëª©'],
        'created_at': row['ì‘ì„±ì¼'],
        'link': row['ë§í¬'],
        'collected_at': row['ìˆ˜ì§‘ì¼ì‹œ']
    }).execute()

print(f"Migrated {len(rows)} rows")
```

---

### ğŸŸ  ì¤‘ìš” (High) - 2ì£¼ ì´ë‚´ í•´ê²° í•„ìš”

#### 4. GitHub Actions í¬ë¡¤ë§ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ ë¯¸ëŒ€ë¹„
**ë¬¸ì œ**:
- í¬ë¡¤ë§ ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ ë©”ì»¤ë‹ˆì¦˜ ì—†ìŒ
- ì‹¤íŒ¨ ì›ì¸:
  - ê¸°ê´€ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½ (ê°€ì¥ ë¹ˆë²ˆ)
  - ì›¹ì‚¬ì´íŠ¸ ì¼ì‹œì  ë‹¤ìš´
  - GitHub Actions íƒ€ì„ì•„ì›ƒ (ìµœëŒ€ 6ì‹œê°„, ê¸°ë³¸ 360ë¶„)
  - Google Sheets API ì¿¼í„° ì´ˆê³¼

**ìœ„í—˜**:
- ë©°ì¹ ê°„ ë°ì´í„° ëˆ„ë½ ë°œê²¬ ëª»í•¨
- ì‚¬ìš©ìì—ê²Œ ì˜¤ë˜ëœ ì •ë³´ ì œê³µ
- ì‹ ë¢°ë„ í•˜ë½

**ê¶Œì¥ ì¡°ì¹˜**:

**1. í¬ë¡¤ëŸ¬ì— ì‹¤íŒ¨ ë¡œê¹… ì¶”ê°€**
```python
# marine_ministry_crawler.py
import logging
from datetime import datetime

class CrawlerLogger:
    def __init__(self):
        self.errors = []
        self.warnings = []
        self.success_count = 0
        self.total_count = 0

    def log_error(self, org_name, board, error):
        self.errors.append({
            'org': org_name,
            'board': board,
            'error': str(error),
            'timestamp': datetime.now().isoformat()
        })

    def get_summary(self):
        return {
            'total': self.total_count,
            'success': self.success_count,
            'failed': len(self.errors),
            'errors': self.errors,
            'timestamp': datetime.now().isoformat()
        }

# ì‚¬ìš© ì˜ˆì‹œ
logger = CrawlerLogger()

for org in organizations:
    logger.total_count += 1
    try:
        result = crawl_organization(org)
        logger.success_count += 1
    except Exception as e:
        logger.log_error(org.name, board, e)

summary = logger.get_summary()

# ì‹¤íŒ¨ê°€ 30% ì´ìƒì´ë©´ ì•Œë¦¼
if summary['failed'] / summary['total'] > 0.3:
    send_alert_email(summary)
```

**2. GitHub Actions ì•Œë¦¼ ì„¤ì •**
```yaml
# .github/workflows/crawl.yml
- name: Run Crawler
  id: crawl
  run: |
    python marine_ministry_crawler.py > crawl.log 2>&1
    echo "exit_code=$?" >> $GITHUB_OUTPUT
  continue-on-error: true

- name: Upload Logs
  if: always()
  uses: actions/upload-artifact@v3
  with:
    name: crawl-logs
    path: crawl.log

- name: Send Failure Notification
  if: steps.crawl.outputs.exit_code != '0'
  uses: dawidd6/action-send-mail@v3
  with:
    server_address: smtp.gmail.com
    server_port: 587
    username: ${{ secrets.EMAIL_USERNAME }}
    password: ${{ secrets.EMAIL_PASSWORD }}
    subject: '[í¬ë¡¤ëŸ¬ ì‹¤íŒ¨] í•´ì–‘ìˆ˜ì‚°ë¶€ í¬ë¡¤ë§ ì˜¤ë¥˜'
    body: |
      í¬ë¡¤ë§ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.

      ì‹¤í–‰ ì‹œê°„: ${{ github.run_started_at }}
      ì›Œí¬í”Œë¡œìš° URL: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}

      ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.
    to: admin@example.com
```

**3. ëŒ€ì‹œë³´ë“œì— ë°ì´í„° freshness í‘œì‹œ**
```typescript
// components/DataFreshnessIndicator.tsx
import { useEffect, useState } from 'react';

export function DataFreshnessIndicator() {
  const [lastUpdate, setLastUpdate] = useState<Date | null>(null);

  useEffect(() => {
    // Google Sheetsì˜ "ìˆ˜ì§‘ì¼ì‹œ" ìµœì‹  ê°’ ê°€ì ¸ì˜¤ê¸°
    fetch('/api/last-update')
      .then(res => res.json())
      .then(data => setLastUpdate(new Date(data.timestamp)));
  }, []);

  if (!lastUpdate) return null;

  const hoursSinceUpdate = (Date.now() - lastUpdate.getTime()) / 1000 / 60 / 60;
  const isStale = hoursSinceUpdate > 24;

  return (
    <div className={isStale ? 'text-red-600' : 'text-green-600'}>
      {isStale && 'âš ï¸ '}
      ë§ˆì§€ë§‰ ë°ì´í„° ìˆ˜ì§‘: {lastUpdate.toLocaleString('ko-KR')}
      {isStale && ' (24ì‹œê°„ ì´ìƒ ê²½ê³¼)'}
    </div>
  );
}
```

#### 5. Next.js ISR (Incremental Static Regeneration) ì „ëµ ë¯¸í¡
**ë¬¸ì œ**:
- ì„¤ê³„ ë¬¸ì„œì— ISR ì–¸ê¸‰ ì—†ìŒ
- ëª¨ë“  ìš”ì²­ë§ˆë‹¤ Google Sheets API í˜¸ì¶œ ì‹œ **ì¿¼í„° ì´ˆê³¼ ë° ëŠë¦° ì‘ë‹µ**

**ìœ„í—˜**:
- ë™ì‹œ ì‚¬ìš©ì 10ëª… = ë¶„ë‹¹ 50-100íšŒ API í˜¸ì¶œ
- ì¿¼í„° ì´ˆê³¼ë¡œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨
- ì‘ë‹µ ì‹œê°„ 2-3ì´ˆ (ì‚¬ìš©ì ê²½í—˜ ì €í•˜)

**ê¶Œì¥ ì¡°ì¹˜**:

**Next.js App Router (13+) í™œìš©**
```typescript
// app/posts/page.tsx
import { unstable_cache } from 'next/cache';

// 5ë¶„ë§ˆë‹¤ ì¬ê²€ì¦
export const revalidate = 300;

async function getPosts() {
  // Google Sheets API í˜¸ì¶œ
  const posts = await fetchFromGoogleSheets();
  return posts;
}

// ìºì‹±ëœ í•¨ìˆ˜
const getCachedPosts = unstable_cache(
  getPosts,
  ['posts-list'],
  {
    revalidate: 300,
    tags: ['posts']
  }
);

export default async function PostsPage() {
  const posts = await getCachedPosts();

  return <PostsTable posts={posts} />;
}
```

**On-Demand Revalidation (í¬ë¡¤ë§ ì™„ë£Œ í›„ ìºì‹œ ë¬´íš¨í™”)**
```python
# marine_ministry_crawler.py
import requests

# í¬ë¡¤ë§ ì™„ë£Œ í›„
requests.post(
    'https://your-dashboard.vercel.app/api/revalidate',
    headers={'Authorization': f'Bearer {REVALIDATION_TOKEN}'},
    json={'tag': 'posts'}
)
```

```typescript
// app/api/revalidate/route.ts
import { revalidateTag } from 'next/cache';
import { NextRequest, NextResponse } from 'next/server';

export async function POST(request: NextRequest) {
  const token = request.headers.get('authorization')?.split(' ')[1];

  if (token !== process.env.REVALIDATION_TOKEN) {
    return NextResponse.json({ message: 'Invalid token' }, { status: 401 });
  }

  const { tag } = await request.json();
  revalidateTag(tag);

  return NextResponse.json({ revalidated: true, now: Date.now() });
}
```

#### 6. í¬ë¡¤ëŸ¬ ì¤‘ë³µ ë°ì´í„° ì‚½ì… ë°©ì§€ ë¶€ì¬
**ë¬¸ì œ**:
- ê°™ì€ ê²Œì‹œë¬¼ì´ ì—¬ëŸ¬ ë²ˆ ìˆ˜ì§‘ë  ìˆ˜ ìˆìŒ
  - ë§¤ì¼ í¬ë¡¤ë§ ì‹œ ì–´ì œ ê²Œì‹œë¬¼ë„ 7ì¼ ë²”ìœ„ì— í¬í•¨
  - GitHub Actionsê°€ ì‹¤íŒ¨ í›„ ì¬ì‹¤í–‰ë  ë•Œ ì¤‘ë³µ ìˆ˜ì§‘

**ìœ„í—˜**:
- Google Sheetsì— ì¤‘ë³µ í–‰ ëˆ„ì 
- ëŒ€ì‹œë³´ë“œì—ì„œ ê°™ì€ ê²Œì‹œë¬¼ì´ ì—¬ëŸ¬ ë²ˆ í‘œì‹œ
- ì‚¬ìš©ì í˜¼ë€

**ê¶Œì¥ ì¡°ì¹˜**:

**Option 1: ê²Œì‹œë¬¼ ê³ ìœ  ID ìƒì„±**
```python
import hashlib

def generate_post_id(org_name, board, title, date):
    """ê²Œì‹œë¬¼ ê³ ìœ  ID ìƒì„±"""
    unique_string = f"{org_name}|{board}|{title}|{date}"
    return hashlib.sha256(unique_string.encode()).hexdigest()[:16]

# í¬ë¡¤ë§ ì‹œ ID ìƒì„±
post = {
    'id': generate_post_id(org_name, board, title, date),
    'org_category': org_category,
    'org_name': org_name,
    'board': board,
    'title': title,
    'created_at': date,
    'link': link,
    'collected_at': datetime.now().isoformat()
}
```

**Option 2: ì‚½ì… ì „ ì¤‘ë³µ ì²´í¬**
```python
def is_duplicate(sheet, post_id):
    """Google Sheetsì—ì„œ ID ì¡´ì¬ ì—¬ë¶€ í™•ì¸"""
    all_ids = sheet.col_values(1)  # ì²« ë²ˆì§¸ ì—´ì´ IDë¼ê³  ê°€ì •
    return post_id in all_ids

# ì‚¬ìš©
if not is_duplicate(sheet, post['id']):
    sheet.append_row([post['id'], post['title'], ...])
else:
    print(f"Skipping duplicate: {post['title']}")
```

**Option 3: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ UNIQUE ì œì•½**
```sql
-- Supabase í…Œì´ë¸” ìƒì„±
CREATE TABLE posts (
  id TEXT PRIMARY KEY,
  org_category TEXT NOT NULL,
  org_name TEXT NOT NULL,
  board TEXT NOT NULL,
  title TEXT NOT NULL,
  created_at DATE NOT NULL,
  link TEXT NOT NULL,
  collected_at TIMESTAMP DEFAULT NOW(),

  -- ë³µí•© ê³ ìœ  ì œì•½
  UNIQUE (org_name, board, title, created_at)
);

-- ì¸ë±ìŠ¤ ìƒì„± (ì„±ëŠ¥)
CREATE INDEX idx_created_at ON posts(created_at DESC);
CREATE INDEX idx_board ON posts(board);
CREATE INDEX idx_org_name ON posts(org_name);
CREATE INDEX idx_title ON posts USING GIN (to_tsvector('korean', title));  -- ì „ë¬¸ ê²€ìƒ‰
```

---

### ğŸŸ¡ ë³´í†µ (Medium) - 1ê°œì›” ì´ë‚´ ê°œì„  ê¶Œì¥

#### 7. ëª¨ë‹ˆí„°ë§ ë° ì—ëŸ¬ ì¶”ì  ë¶€ì¬
**ë¬¸ì œ**:
- Sentry í†µí•© ê³„íšë§Œ ìˆê³  êµ¬ì²´ì ì¸ ì„¤ì • ì—†ìŒ
- ì‚¬ìš©ì í–‰ë™ ë¶„ì„ ë„êµ¬ ë¯¸ì„¤ì •
- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë¶€ì¬

**ê¶Œì¥ ì¡°ì¹˜**:

**Sentry ì„¤ì •**
```javascript
// next.config.js
const { withSentryConfig } = require('@sentry/nextjs');

module.exports = withSentryConfig({
  // Next.js config
}, {
  silent: true,
  org: "your-org",
  project: "marine-dashboard",
});

// sentry.client.config.js
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 1.0,

  // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
  beforeSend(event, hint) {
    // ë¯¼ê° ì •ë³´ ì œê±°
    if (event.request) {
      delete event.request.cookies;
    }
    return event;
  }
});
```

**Vercel Analytics**
```javascript
// app/layout.tsx
import { Analytics } from '@vercel/analytics/react';
import { SpeedInsights } from '@vercel/speed-insights/next';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <Analytics />
        <SpeedInsights />
      </body>
    </html>
  );
}
```

#### 8. ë°±ì—… ë° ë³µêµ¬ ê³„íš ë¶€ì¬
**ë¬¸ì œ**:
- Google Sheets ë°ì´í„° ì†ì‹¤ ì‹œ ë³µêµ¬ ë°©ë²• ì—†ìŒ
- ì‹¤ìˆ˜ë¡œ ì‹œíŠ¸ ì‚­ì œ, APIë¥¼ í†µí•œ ëŒ€ëŸ‰ ì‚­ì œ ê°€ëŠ¥

**ê¶Œì¥ ì¡°ì¹˜**:

**ì¼ì¼ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸**
```python
# backup_sheets.py
import gspread
import json
from datetime import datetime
import boto3  # AWS S3 (ë˜ëŠ” Google Cloud Storage)

def backup_sheets():
    gc = gspread.service_account(filename='service_account.json')
    sheet = gc.open('í•´ì–‘ìˆ˜ì‚°ë¶€_ê²Œì‹œë¬¼').sheet1

    # ëª¨ë“  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    data = sheet.get_all_records()

    # JSONìœ¼ë¡œ ì €ì¥
    backup_filename = f"backup_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"

    with open(backup_filename, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)

    # S3 ì—…ë¡œë“œ (ì„ íƒì‚¬í•­)
    s3 = boto3.client('s3')
    s3.upload_file(
        backup_filename,
        'marine-dashboard-backups',
        backup_filename
    )

    print(f"Backup saved: {backup_filename}")

if __name__ == '__main__':
    backup_sheets()
```

**GitHub Actions ë°±ì—… ì›Œí¬í”Œë¡œìš°**
```yaml
# .github/workflows/backup.yml
name: Daily Backup
on:
  schedule:
    - cron: '0 2 * * *'  # ë§¤ì¼ ì˜¤ì „ 2ì‹œ (UTC)

jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: pip install gspread boto3

      - name: Run Backup
        run: python backup_sheets.py
        env:
          GOOGLE_APPLICATION_CREDENTIALS: ${{ secrets.GOOGLE_SERVICE_ACCOUNT_KEY }}
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
```

#### 9. ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½ ê°ì§€ ë©”ì»¤ë‹ˆì¦˜ ë¶€ì¬
**ë¬¸ì œ**:
- ê¸°ê´€ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½ ì‹œ í¬ë¡¤ëŸ¬ ì‹¤íŒ¨
- ë³€ê²½ ê°ì§€ í›„ ìˆ˜ë™ ì½”ë“œ ìˆ˜ì • í•„ìš”

**ê¶Œì¥ ì¡°ì¹˜**:

**êµ¬ì¡° ë³€ê²½ ê°ì§€ ë¡œì§**
```python
class StructureValidator:
    def __init__(self):
        # ê¸°ëŒ€í•˜ëŠ” HTML êµ¬ì¡°ì˜ íŠ¹ì§•
        self.expected_selectors = {
            'table': 'table.board-list',
            'title': 'td.title a',
            'date': 'td.date',
            'pagination': 'div.pagination'
        }

    def validate(self, soup):
        """HTML êµ¬ì¡°ê°€ ì˜ˆìƒê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸"""
        for key, selector in self.expected_selectors.items():
            elements = soup.select(selector)
            if not elements:
                return False, f"Missing selector: {selector}"
        return True, "OK"

    def crawl_with_validation(self, url):
        response = requests.get(url)
        soup = BeautifulSoup(response.content, 'html.parser')

        is_valid, message = self.validate(soup)
        if not is_valid:
            logger.error(f"Structure changed: {url} - {message}")
            send_alert(f"âš ï¸ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½ ê°ì§€: {url}\n{message}")
            return None

        return self.parse_posts(soup)
```

#### 10. Rate Limiting ì—†ëŠ” í¬ë¡¤ëŸ¬
**ë¬¸ì œ**:
- 1-2ì´ˆ ëŒ€ê¸°ëŠ” ë„ˆë¬´ ë‹¨ìˆœ
- íŠ¹ì • ì‚¬ì´íŠ¸ëŠ” ë” ì—„ê²©í•œ ì œí•œ í•„ìš”

**ê¶Œì¥ ì¡°ì¹˜**:
```python
from ratelimit import limits, sleep_and_retry

class RateLimitedCrawler:
    @sleep_and_retry
    @limits(calls=10, period=60)  # ë¶„ë‹¹ 10íšŒ ì œí•œ
    def fetch_page(self, url):
        response = requests.get(url, timeout=30)
        return response

    def crawl_with_retry(self, url, max_retries=3):
        for attempt in range(max_retries):
            try:
                return self.fetch_page(url)
            except requests.exceptions.Timeout:
                if attempt < max_retries - 1:
                    time.sleep(2 ** attempt)  # Exponential backoff
                    continue
                raise
```

---

### ğŸ”µ ë‚®ìŒ (Low) - í–¥í›„ ê°œì„  ê³ ë ¤

#### 11. êµ­ì œí™”(i18n) ë¯¸ì§€ì›
**ë¬¸ì œ**: í˜„ì¬ í•œêµ­ì–´ë§Œ ì§€ì›, í–¥í›„ ì˜ë¬¸ ì§€ì› í•„ìš” ì‹œ ì „ë©´ ìˆ˜ì •

**ê¶Œì¥ ì¡°ì¹˜**: next-intl ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ì „ ì„¤ê³„

#### 12. ë‹¤í¬ ëª¨ë“œ êµ¬í˜„ ìš°ì„ ìˆœìœ„ ë‚®ìŒ
**ë¬¸ì œ**: ì„¤ê³„ì—ëŠ” í¬í•¨ë˜ì–´ ìˆìœ¼ë‚˜ MVPì—ì„œ ì œì™¸ ê¶Œì¥

**ê¶Œì¥ ì¡°ì¹˜**: Phase 2ë¡œ ì—°ê¸°

#### 13. PWA ê¸°ëŠ¥ ë¶€ì¬
**ë¬¸ì œ**: ì˜¤í”„ë¼ì¸ ì§€ì›, í‘¸ì‹œ ì•Œë¦¼ ë“± PWA ê¸°ëŠ¥ ë¯¸êµ¬í˜„

**ê¶Œì¥ ì¡°ì¹˜**: Phase 3 ì´í›„ ê³ ë ¤

---

## ğŸ’¡ ê°œì„  ì œì•ˆ

### 1. ì•„í‚¤í…ì²˜ ê°œì„ ì•ˆ

#### í˜„ì¬ ì•„í‚¤í…ì²˜
```
GitHub Actions (í¬ë¡¤ëŸ¬)
        â†“
Google Sheets (ë°ì´í„°ë² ì´ìŠ¤)
        â†“
Next.js (Vercel) â†’ ì‚¬ìš©ì
```

**ë¬¸ì œì **:
- Google Sheetsê°€ ë‹¨ì¼ ì‹¤íŒ¨ ì§€ì  (SPOF)
- API ì¿¼í„° ì œí•œ
- ë³µì¡í•œ ì¿¼ë¦¬ ë¶ˆê°€
- ëŠë¦° ì‘ë‹µ ì†ë„

#### ê¶Œì¥ ì•„í‚¤í…ì²˜ (3ê°œì›” ì´ë‚´ ë§ˆì´ê·¸ë ˆì´ì…˜)
```
GitHub Actions (í¬ë¡¤ëŸ¬)
        â†“
    Supabase PostgreSQL (ë°ì´í„°ë² ì´ìŠ¤)
        â†“
Next.js (Vercel) + Redis ìºì‹œ (Upstash)
        â†“
    ì‚¬ìš©ì
        â†“
Vercel Edge Functions (ì‹¤ì‹œê°„ ê²€ìƒ‰)
```

**ì¥ì **:
- ë¬´ì œí•œ ì¿¼ë¦¬ (ì¿¼í„° ì—†ìŒ)
- ë³µì¡í•œ í•„í„°/ê²€ìƒ‰ ê°€ëŠ¥
- ë¹ ë¥¸ ì‘ë‹µ (< 100ms)
- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (WebSocket)
- íŠ¸ëœì­ì…˜ ì§€ì›
- ìë™ ë°±ì—…

**ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„**:
1. **ì£¼ì°¨ 1-2**: Supabase í”„ë¡œì íŠ¸ ìƒì„±, ìŠ¤í‚¤ë§ˆ ì„¤ê³„
2. **ì£¼ì°¨ 3**: ê¸°ì¡´ Google Sheets ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
3. **ì£¼ì°¨ 4**: Next.js API ë¼ìš°íŠ¸ Supabaseë¡œ ì „í™˜
4. **ì£¼ì°¨ 5**: í¬ë¡¤ëŸ¬ Supabase ì—°ë™
5. **ì£¼ì°¨ 6**: ë³‘ë ¬ ìš´ì˜ ë° í…ŒìŠ¤íŠ¸
6. **ì£¼ì°¨ 7**: Google Sheets ë‹¨ê³„ì  íê¸°

### 2. ë³´ì•ˆ ê°•í™” ë°©ì•ˆ

#### í˜„ì¬ ì·¨ì•½ì 
- Service Account í‚¤ ë…¸ì¶œ ìœ„í—˜
- API ì—”ë“œí¬ì¸íŠ¸ ë¬´ë‹¨ ì ‘ê·¼ ê°€ëŠ¥
- Rate Limiting ì—†ìŒ

#### ê¶Œì¥ ë³´ì•ˆ ì¡°ì¹˜
```typescript
// middleware.ts (Vercel Edge Middleware)
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';
import { Ratelimit } from '@upstash/ratelimit';
import { Redis } from '@upstash/redis';

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(10, '10 s'),  // 10ì´ˆë‹¹ 10íšŒ
});

export async function middleware(request: NextRequest) {
  // API ì—”ë“œí¬ì¸íŠ¸ì—ë§Œ ì ìš©
  if (request.nextUrl.pathname.startsWith('/api/')) {
    const ip = request.ip ?? '127.0.0.1';
    const { success, limit, reset, remaining } = await ratelimit.limit(ip);

    if (!success) {
      return NextResponse.json(
        { error: 'Too many requests' },
        {
          status: 429,
          headers: {
            'X-RateLimit-Limit': limit.toString(),
            'X-RateLimit-Remaining': remaining.toString(),
            'X-RateLimit-Reset': reset.toString(),
          },
        }
      );
    }
  }

  return NextResponse.next();
}

export const config = {
  matcher: '/api/:path*',
};
```

**CORS ì„¤ì •**:
```typescript
// next.config.js
module.exports = {
  async headers() {
    return [
      {
        source: '/api/:path*',
        headers: [
          { key: 'Access-Control-Allow-Origin', value: 'https://yourdomain.com' },
          { key: 'Access-Control-Allow-Methods', value: 'GET, POST, OPTIONS' },
          { key: 'Access-Control-Allow-Headers', value: 'Content-Type, Authorization' },
        ],
      },
    ];
  },
};
```

### 3. ë¹„ìš© ìµœì í™”

#### í˜„ì¬ ë¬´ë£Œ í”Œëœ ì‚¬ìš© ê°€ëŠ¥
- GitHub Actions: ì›” 2,000ë¶„ (Public ì €ì¥ì†ŒëŠ” ë¬´ì œí•œ)
- Vercel: Hobby í”Œëœ (ë¬´ë£Œ)
  - 100GB ëŒ€ì—­í­/ì›”
  - Serverless í•¨ìˆ˜ ì‹¤í–‰ ì‹œê°„ 100GB-ì‹œê°„/ì›”
- Google Sheets API: ì¼ì¼ 500íšŒ

#### ì˜ˆìƒ ë¹„ìš© (ë¬´ë£Œ ì¿¼í„° ì´ˆê³¼ ì‹œ)
- **Vercel Pro**: $20/ì›” (1TB ëŒ€ì—­í­, 1000GB-ì‹œê°„)
- **Supabase Pro**: $25/ì›” (8GB DB, 50GB ì „ì†¡ëŸ‰)
- **Upstash Redis**: $0.2/ì›” (10,000íšŒ í˜¸ì¶œ ë¬´ë£Œ)
- **ì´ ì˜ˆìƒ**: $0-45/ì›” (ì‚¬ìš©ëŸ‰ì— ë”°ë¼)

#### ìµœì í™” ë°©ì•ˆ
1. **Vercel ISR ì ê·¹ í™œìš©**: ìºì‹±ìœ¼ë¡œ API í˜¸ì¶œ 99% ê°ì†Œ
2. **ì´ë¯¸ì§€ ìµœì í™”**: Vercel Image Optimization ì‚¬ìš©
3. **Edge Functions**: ì§€ì—­ë³„ ìºì‹±ìœ¼ë¡œ ì‘ë‹µ ì†ë„ í–¥ìƒ
4. **Google Sheets ëŒ€ì‹  Supabase**: ì¿¼í„° ì œí•œ ì—†ìŒ

### 4. ì—ëŸ¬ ë³µêµ¬ ì „ëµ

#### í¬ë¡¤ëŸ¬ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ë³„ ëŒ€ì‘

| ì‹œë‚˜ë¦¬ì˜¤ | ê°ì§€ ë°©ë²• | ëŒ€ì‘ |
|---------|----------|------|
| ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½ | Selector ì°¾ê¸° ì‹¤íŒ¨ | ì´ë©”ì¼ ì•Œë¦¼ + ë§ˆì§€ë§‰ ì„±ê³µ ë°ì´í„° ìœ ì§€ |
| ì›¹ì‚¬ì´íŠ¸ ì¼ì‹œ ë‹¤ìš´ | HTTP 500/503 | ìë™ ì¬ì‹œë„ (3íšŒ), ì‹¤íŒ¨ ì‹œ ìŠ¤í‚µ |
| ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ | Timeout ì˜ˆì™¸ | Exponential backoff ì¬ì‹œë„ |
| Google Sheets ì¿¼í„° ì´ˆê³¼ | 429 ì—ëŸ¬ | 1ì‹œê°„ í›„ ì¬ì‹œë„ (GitHub Actions ì§€ì—° ì‹¤í–‰) |
| ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜ | ë‚ ì§œ í˜•ì‹ ë¶ˆì¼ì¹˜ | ë¡œê·¸ ê¸°ë¡, í•´ë‹¹ ê²Œì‹œë¬¼ ìŠ¤í‚µ |

#### ìë™ ë³µêµ¬ ì›Œí¬í”Œë¡œìš°
```yaml
# .github/workflows/crawl-retry.yml
name: Crawl Retry
on:
  workflow_run:
    workflows: ["Daily Crawl"]
    types:
      - completed

jobs:
  retry-on-failure:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    steps:
      - name: Wait 1 hour
        run: sleep 3600

      - name: Retry Crawl
        uses: actions/github-script@v6
        with:
          script: |
            await github.rest.actions.createWorkflowDispatch({
              owner: context.repo.owner,
              repo: context.repo.repo,
              workflow_id: 'crawl.yml',
              ref: 'main'
            });
```

### 5. ëª¨ë‹ˆí„°ë§ ê°œì„ 

#### ëŒ€ì‹œë³´ë“œ Health Check API
```typescript
// app/api/health/route.ts
import { NextResponse } from 'next/server';

export async function GET() {
  const checks = {
    database: false,
    sheets: false,
    lastCrawl: null,
  };

  try {
    // Google Sheets ì—°ê²° í™•ì¸
    const sheetsResponse = await fetch('/api/posts?limit=1');
    checks.sheets = sheetsResponse.ok;

    // ë§ˆì§€ë§‰ í¬ë¡¤ë§ ì‹œê°„ í™•ì¸
    const posts = await sheetsResponse.json();
    const lastPost = posts[0];
    if (lastPost) {
      checks.lastCrawl = lastPost.collected_at;

      // 24ì‹œê°„ ì´ìƒ ê²½ê³¼ ì‹œ ê²½ê³ 
      const hoursSince = (Date.now() - new Date(lastPost.collected_at).getTime()) / 1000 / 60 / 60;
      if (hoursSince > 24) {
        checks.warning = 'Last crawl is more than 24 hours ago';
      }
    }

    const status = checks.sheets ? 200 : 503;

    return NextResponse.json(
      {
        status: status === 200 ? 'healthy' : 'unhealthy',
        checks,
        timestamp: new Date().toISOString(),
      },
      { status }
    );
  } catch (error) {
    return NextResponse.json(
      {
        status: 'unhealthy',
        error: error.message,
        timestamp: new Date().toISOString(),
      },
      { status: 503 }
    );
  }
}
```

#### UptimeRobot í†µí•© (ë¬´ë£Œ)
```
Monitor URL: https://your-dashboard.vercel.app/api/health
Interval: 5ë¶„
Alert Contacts: ì´ë©”ì¼/Slack
```

---

## ğŸ¯ ì‹¤í–‰ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1 ë°°í¬ ì „ í•„ìˆ˜ ì¡°ì¹˜ (ìµœìš°ì„ )

- [ ] **ë³´ì•ˆ**
  - [ ] Service Account JSON í‚¤ë¥¼ GitHub Secretsì— ë“±ë¡
  - [ ] `.gitignore`ì— `*.json` ì¶”ê°€
  - [ ] ê¸°ì¡´ ì»¤ë°‹ íˆìŠ¤í† ë¦¬ì—ì„œ í‚¤ íŒŒì¼ ì œê±° (`git filter-branch`)
  - [ ] Google Cloud í”„ë¡œì íŠ¸ì— IP ì œí•œ ì„¤ì •

- [ ] **API ì¿¼í„° ê´€ë¦¬**
  - [ ] Google Sheets API Batch ì“°ê¸°ë¡œ ì „í™˜ (96íšŒ â†’ 1íšŒ)
  - [ ] Next.js ISR ì„¤ì • (revalidate: 300ì´ˆ)
  - [ ] Rate Limiting ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€

- [ ] **ë°ì´í„° ë¬´ê²°ì„±**
  - [ ] ê²Œì‹œë¬¼ ê³ ìœ  ID ìƒì„± ë¡œì§ ì¶”ê°€
  - [ ] ì¤‘ë³µ ì²´í¬ ë¡œì§ êµ¬í˜„
  - [ ] Google Sheetsì— 'id' ì»¬ëŸ¼ ì¶”ê°€

- [ ] **ëª¨ë‹ˆí„°ë§**
  - [ ] í¬ë¡¤ëŸ¬ ì—ëŸ¬ ë¡œê¹… ì¶”ê°€
  - [ ] GitHub Actions ì‹¤íŒ¨ ì‹œ ì´ë©”ì¼ ì•Œë¦¼ ì„¤ì •
  - [ ] ëŒ€ì‹œë³´ë“œì— ë°ì´í„° freshness í‘œì‹œ

- [ ] **ë°±ì—…**
  - [ ] ì¼ì¼ ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [ ] GitHub Actions ë°±ì—… ì›Œí¬í”Œë¡œìš° ì„¤ì •
  - [ ] ë³µêµ¬ ì ˆì°¨ ë¬¸ì„œí™”

### Phase 2 ì¤€ë¹„ (1-3ê°œì›”)

- [ ] **ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš**
  - [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„±
  - [ ] ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (ERD ì‘ì„±)
  - [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [ ] ë³‘ë ¬ ìš´ì˜ ê¸°ê°„ ì„¤ì •

- [ ] **ì„±ëŠ¥ ìµœì í™”**
  - [ ] Vercel Analytics ì„¤ì¹˜
  - [ ] Core Web Vitals ì¸¡ì •
  - [ ] ì´ë¯¸ì§€ ìµœì í™” (WebP, lazy loading)
  - [ ] ê°€ìƒ ìŠ¤í¬ë¡¤ë§ êµ¬í˜„ (1000ê±´ ì´ìƒ ë°ì´í„°)

- [ ] **ë³´ì•ˆ ê°•í™”**
  - [ ] CORS ì •ì±… ì„¤ì •
  - [ ] API ì¸ì¦ ì¶”ê°€ (JWT)
  - [ ] Rate Limiting (Upstash Redis)

### Phase 3 ê³ ë„í™” (3-6ê°œì›”)

- [ ] **ê¸°ëŠ¥ í™•ì¥**
  - [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ (WebSocket)
  - [ ] í‚¤ì›Œë“œ ì•Œë¦¼ ì„¤ì •
  - [ ] ë°ì´í„° ì‹œê°í™” (D3.js)
  - [ ] AI ê¸°ë°˜ ì¶”ì²œ

- [ ] **ì ‘ê·¼ì„± ê°œì„ **
  - [ ] WCAG 2.1 AA ì™„ì „ ì¤€ìˆ˜
  - [ ] í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ 100%
  - [ ] ìŠ¤í¬ë¦° ë¦¬ë” ìµœì í™”

- [ ] **êµ­ì œí™”**
  - [ ] ë‹¤êµ­ì–´ ì§€ì› (í•œ/ì˜)
  - [ ] íƒ€ì„ì¡´ ì²˜ë¦¬

---

## ğŸ“Š ìœ„í—˜ ë§¤íŠ¸ë¦­ìŠ¤

| ìœ„í—˜ ìš”ì†Œ | ë°œìƒ ê°€ëŠ¥ì„± | ì˜í–¥ë„ | ìš°ì„ ìˆœìœ„ |
|----------|-----------|-------|---------|
| Service Account í‚¤ ë…¸ì¶œ | ë†’ìŒ | ì¹˜ëª…ì  | ğŸ”´ ê¸´ê¸‰ |
| Google Sheets ì¿¼í„° ì´ˆê³¼ | ë†’ìŒ | ë†’ìŒ | ğŸ”´ ê¸´ê¸‰ |
| í¬ë¡¤ëŸ¬ ì‹¤íŒ¨ ë¯¸ê°ì§€ | ì¤‘ê°„ | ë†’ìŒ | ğŸŸ  ë†’ìŒ |
| ë°ì´í„° ì¤‘ë³µ ì‚½ì… | ë†’ìŒ | ì¤‘ê°„ | ğŸŸ  ë†’ìŒ |
| ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡° ë³€ê²½ | ì¤‘ê°„ | ë†’ìŒ | ğŸŸ  ë†’ìŒ |
| í™•ì¥ì„± ë¬¸ì œ (6ê°œì›” í›„) | í™•ì‹¤ | ë†’ìŒ | ğŸŸ  ë†’ìŒ |
| ë°±ì—… ë¶€ì¬ | ë‚®ìŒ | ë†’ìŒ | ğŸŸ¡ ì¤‘ê°„ |
| ëª¨ë‹ˆí„°ë§ ë¶€ì¬ | ì¤‘ê°„ | ì¤‘ê°„ | ğŸŸ¡ ì¤‘ê°„ |

---

## ğŸ’¬ ìµœì¢… ê¶Œê³ ì‚¬í•­

### ì¦‰ì‹œ ì‹¤í–‰ (ë°°í¬ ì „ í•„ìˆ˜)
1. **Service Account í‚¤ë¥¼ GitHub Secretsë¡œ ì´ë™** (ë³´ì•ˆ ìµœìš°ì„ )
2. **Google Sheets Batch API ì‚¬ìš©** (ì¿¼í„° ë¬¸ì œ í•´ê²°)
3. **ì¤‘ë³µ ë°ì´í„° ë°©ì§€ ë¡œì§ ì¶”ê°€** (ë°ì´í„° ë¬´ê²°ì„±)
4. **í¬ë¡¤ëŸ¬ ì—ëŸ¬ ì•Œë¦¼ ì„¤ì •** (ìš´ì˜ ì•ˆì •ì„±)

### 2ì£¼ ì´ë‚´
5. **Next.js ISR ìºì‹± êµ¬í˜„** (ì„±ëŠ¥ í–¥ìƒ)
6. **ì¼ì¼ ë°±ì—… ìë™í™”** (ë°ì´í„° ì•ˆì „)
7. **Health Check API êµ¬ì¶•** (ëª¨ë‹ˆí„°ë§)

### 1ê°œì›” ì´ë‚´
8. **Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘** (í™•ì¥ì„± í™•ë³´)
9. **Sentry í†µí•©** (ì—ëŸ¬ ì¶”ì )
10. **Rate Limiting êµ¬í˜„** (ì„œë¹„ìŠ¤ ë³´í˜¸)

### 3ê°œì›” ì´ë‚´
11. **Supabase ì™„ì „ ì „í™˜** (Google Sheets íê¸°)
12. **Redis ìºì‹± ì¶”ê°€** (ì„±ëŠ¥ ìµœì í™”)
13. **CI/CD íŒŒì´í”„ë¼ì¸ ê°•í™”** (í…ŒìŠ¤íŠ¸ ìë™í™”)

---

## ğŸ“ ê²€í†  ìš”ì•½

### ê²€ì¦ ê²°ê³¼
**âš ï¸ ì¡°ê±´ë¶€ ìŠ¹ì¸**: í˜„ì¬ ì„¤ê³„ëŠ” **í”„ë¡œí† íƒ€ì…ìœ¼ë¡œëŠ” ì í•©**í•˜ë‚˜, ë‹¤ìŒ **4ê°€ì§€ ì‹¬ê°í•œ ìœ„í—˜ ìš”ì†Œ**ë¥¼ ì¦‰ì‹œ í•´ê²°í•´ì•¼ í”„ë¡œë•ì…˜ ë°°í¬ ê°€ëŠ¥:

1. Service Account í‚¤ ë³´ì•ˆ ì·¨ì•½ì 
2. Google Sheets API ì¿¼í„° ì´ˆê³¼ ìœ„í—˜
3. ë°ì´í„°ë² ì´ìŠ¤ ë¶€ì¬ (í™•ì¥ì„± ë¬¸ì œ)
4. í¬ë¡¤ë§ ì‹¤íŒ¨ ê°ì§€ ë¶€ì¬

### í”„ë¡œì íŠ¸ íƒ€ì„ë¼ì¸ ì¬ì¡°ì • ì œì•ˆ

**ê¸°ì¡´ ê³„íš (ì¶”ì •)**:
- Phase 1: ì„¤ê³„ ì™„ë£Œ
- Phase 2: ì¦‰ì‹œ ë°°í¬

**ìˆ˜ì • ê³„íš (ê¶Œì¥)**:
```
Week 1-2: Phase 1.5 - ë³´ì•ˆ ë° ì•ˆì •ì„± ê°•í™”
  - Service Account í‚¤ ë³´ì•ˆ ì¡°ì¹˜
  - Batch API ì „í™˜
  - ì¤‘ë³µ ë°©ì§€ ë¡œì§
  - ì—ëŸ¬ ì•Œë¦¼ ì„¤ì •

Week 3: Phase 2 - MVP ë°°í¬
  - ë‚´ë¶€ í…ŒìŠ¤íŠ¸ (3-5ëª…)
  - ë²„ê·¸ ìˆ˜ì •

Week 4: Phase 3 - ì œí•œì  ê³µê°œ
  - 10-20ëª… ë² íƒ€ í…ŒìŠ¤í„°
  - í”¼ë“œë°± ìˆ˜ì§‘

Week 5-8: Phase 4 - ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
  - Supabase ì „í™˜
  - ì„±ëŠ¥ ìµœì í™”

Week 9+: Phase 5 - ì •ì‹ ì¶œì‹œ
  - ì „ì²´ ê³µê°œ
  - ì§€ì†ì  ê°œì„ 
```

### ì˜ˆìƒ ì„±ê³µë¥ 
- **í˜„ì¬ ê³„íšëŒ€ë¡œ ì§„í–‰ ì‹œ**: 30% (ë³´ì•ˆ/í™•ì¥ì„± ë¬¸ì œë¡œ ì¸í•œ ì¡°ê¸° ì‹¤íŒ¨ ê°€ëŠ¥ì„± ë†’ìŒ)
- **ê¶Œì¥ì‚¬í•­ ë°˜ì˜ ì‹œ**: 85% (ì•ˆì •ì ì¸ í”„ë¡œë•ì…˜ ìš´ì˜ ê°€ëŠ¥)

---

## ğŸ“ ê²°ë¡ 

í˜„ì¬ ì„¤ê³„ëŠ” **UI/UX ì¸¡ë©´ì—ì„œ ë§¤ìš° ìš°ìˆ˜**í•˜ë©°, ì‚¬ìš©ì ê²½í—˜ í”Œë¡œìš°ê°€ ì˜ ê³„íšë˜ì–´ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì ‘ê·¼ì„±, ë°˜ì‘í˜• ë””ìì¸, ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°ëŠ” ëª¨ë²” ì‚¬ë¡€ ìˆ˜ì¤€ì…ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ **ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ì™€ ë³´ì•ˆ ì¸¡ë©´ì—ì„œ ì‹¬ê°í•œ ì·¨ì•½ì **ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. Google Sheetsë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ í”„ë¡œí† íƒ€ì…ì—ëŠ” ì í•©í•˜ì§€ë§Œ, ì‹¤ì œ ì„œë¹„ìŠ¤ë¡œëŠ” 3-6ê°œì›” ë‚´ì— í•œê³„ì— ë„ë‹¬í•  ê²ƒì…ë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜ë¥¼ ëª¨ë‘ ë°˜ì˜í•œë‹¤ë©´**, ì´ í”„ë¡œì íŠ¸ëŠ” ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤ë¡œ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ì€ ì¥ê¸°ì ìœ¼ë¡œ í•„ìˆ˜ì ì´ë©°, ê°€ëŠ¥í•œ í•œ ë¹¨ë¦¬ ê³„íšì„ ìˆ˜ë¦½í•´ì•¼ í•©ë‹ˆë‹¤.

**ìµœì¢… íŒì •**: âš ï¸ **ì¡°ê±´ë¶€ ìŠ¹ì¸** - ìœ„ì— ëª…ì‹œëœ ê¸´ê¸‰ ì¡°ì¹˜ 4ê°€ì§€ë¥¼ ì™„ë£Œí•œ í›„ ë°°í¬ ì§„í–‰ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

**ë‹¤ìŒ ë‹¨ê³„**:
1. ì´ ë¦¬í¬íŠ¸ë¥¼ íŒ€ê³¼ ê³µìœ 
2. ê¸´ê¸‰ ì¡°ì¹˜ 4ê°€ì§€ ìš°ì„  ì²˜ë¦¬
3. ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš ìˆ˜ë¦½ (3ê°œì›” íƒ€ì„ë¼ì¸)
4. ì£¼ê°„ ì§„í–‰ ìƒí™© ë¦¬ë·°

**ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ ì§ˆë¬¸í•´ì£¼ì„¸ìš”!**
